<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Português</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6C63FF;
            --secondary: #4A44C6;
            --accent: #FF6584;
            --correct: #4CAF50;
            --incorrect: #F44336;
            --light: #FFFFFF;
            --dark: #2D3047;
            --gray: #F5F5F5;
            --text: #333333;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6C63FF, #4A44C6);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--text);
        }
        
        .container {
            background-color: var(--light);
            border-radius: 20px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 800px;
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: var(--light);
            padding: 25px;
            text-align: center;
            position: relative;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .progress-container {
            padding: 20px 25px;
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .progress-bar {
            height: 8px;
            background-color: rgba(255, 255, 255, 0.3);
            width: 100%;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #4cd964, #5ac8fa);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }
        
        .content {
            padding: 30px;
        }
        
        .start-screen {
            text-align: center;
        }
        
        .start-screen h2 {
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .start-screen p {
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .btn {
            padding: 12px 30px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(108, 99, 255, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(108, 99, 255, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .question-screen {
            display: none;
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        .question-text {
            font-size: 1.3rem;
            margin-bottom: 25px;
            line-height: 1.5;
            background-color: var(--gray);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .options-container {
            margin-bottom: 25px;
        }
        
        .option {
            background-color: var(--gray);
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            display: flex;
            align-items: center;
        }
        
        .option:hover {
            background-color: #e9e9e9;
        }
        
        .option.selected {
            border-color: var(--primary);
            background-color: rgba(108, 99, 255, 0.1);
        }
        
        .option-letter {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 30px;
            height: 30px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .checkbox-option {
            display: flex;
            align-items: center;
        }
        
        .checkbox-option input {
            margin-right: 15px;
            transform: scale(1.3);
            accent-color: var(--primary);
        }
        
        .true-false-options {
            display: flex;
            gap: 15px;
        }
        
        .true-false-options .option {
            flex: 1;
            text-align: center;
            font-weight: bold;
            justify-content: center;
        }
        
        .true-option .option-letter {
            background-color: var(--correct);
        }
        
        .false-option .option-letter {
            background-color: var(--incorrect);
        }
        
        .open-answer textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }
        
        .open-answer textarea:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }
        
        .btn-next {
            background: linear-gradient(to right, #5ac8fa, #007aff);
        }
        
        .btn-next:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .results-screen {
            display: none;
            text-align: center;
        }
        
        .results-screen h2 {
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--correct) 0% var(--percentage), #eee var(--percentage) 100%);
            margin: 25px auto;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .score-circle::before {
            content: "";
            position: absolute;
            width: 120px;
            height: 120px;
            background-color: white;
            border-radius: 50%;
        }
        
        .score-text {
            position: relative;
            z-index: 1;
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .score-label {
            font-size: 1.2rem;
            margin-top: 10px;
            color: var(--text);
        }
        
        .results-details {
            text-align: left;
            margin-top: 30px;
            background-color: var(--gray);
            padding: 20px;
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .result-item {
            padding: 15px;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .result-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
            margin-top: 5px;
        }
        
        .correct-icon {
            background-color: var(--correct);
        }
        
        .incorrect-icon {
            background-color: var(--incorrect);
        }
        
        .result-content {
            flex: 1;
        }
        
        .result-question {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .result-answer {
            font-size: 0.9rem;
            color: #666;
        }
        
        .question-counter {
            background-color: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
            
            .true-false-options {
                flex-direction: column;
            }
            
            .score-circle {
                width: 120px;
                height: 120px;
            }
            
            .score-circle::before {
                width: 90px;
                height: 90px;
            }
            
            .score-text {
                font-size: 1.8rem;
            }
            
            .buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Quiz de Português</h1>
            <div class="subtitle">Preposições, Concordância e A Mala de Hana</div>
        </header>
        
        <div class="progress-container">
            <div class="progress-info">
                <span id="progress-text">Progresso: 0%</span>
                <span class="question-counter" id="question-counter">Questão 0 de 30</span>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
        </div>
        
        <div class="content">
            <div class="start-screen" id="start-screen">
                <h2>Bem-vindo ao Quiz de Português!</h2>
                <p>Teste seus conhecimentos com 30 questões sobre preposições, concordância verbal e o livro "A Mala de Hana".</p>
                <p>O quiz inclui questões de múltipla escolha, verdadeiro ou falso, marcar X e resposta aberta.</p>
                <button class="btn" id="start-btn">Iniciar Quiz</button>
            </div>
            
            <div class="question-screen" id="question-screen">
                <div class="question-header">
                    <span id="question-type">Múltipla Escolha</span>
                    <span id="question-difficulty">Dificuldade: Fácil</span>
                </div>
                <div class="question-text" id="question-text"></div>
                <div class="options-container" id="options-container"></div>
                <div class="buttons">
                    <button class="btn" id="submit-btn">Enviar Resposta</button>
                    <button class="btn btn-next" id="next-btn" disabled>Próxima Questão</button>
                </div>
            </div>
            
            <div class="results-screen" id="results-screen">
                <h2>Quiz Concluído!</h2>
                <p>Sua pontuação final:</p>
                <div class="score-circle">
                    <div class="score-text" id="final-score">0/30</div>
                </div>
                <div class="score-label" id="score-grade">Nota: 0.0</div>
                
                <div class="results-details" id="results-details">
                    <!-- Resultados detalhados serão inseridos aqui -->
                </div>
                
                <button class="btn" id="restart-btn" style="margin-top: 25px;">Jogar Novamente</button>
            </div>
        </div>
    </div>

    <script>
        // Banco de 30 questões
        const questions = [
            // 3 questões fáceis sobre A Mala de Hana (desfecho)
            {
                type: "multipla",
                difficulty: "Fácil",
                question: "No final do livro 'A Mala de Hana', o que acontece com Hana?",
                options: [
                    "Ela consegue escapar do campo de concentração",
                    "Ela é adotada por uma família",
                    "Ela morre no campo de concentração",
                    "Ela se reencontra com toda a sua família"
                ],
                correctAnswer: 2,
                explanation: "Hana morre no campo de concentração de Auschwitz, tornando-se um símbolo das vítimas do Holocausto."
            },
            {
                type: "aberta",
                difficulty: "Fácil",
                question: "Qual é a importância da mala no desfecho da história de Hana?",
                correctKeywords: ["símbolo", "memória", "lembrança", "história", "testemunho", "recordação"],
                incorrectKeywords: [],
                explanation: "A mala torna-se um símbolo de memória e testemunho da história de Hana e de todas as vítimas do Holocausto."
            },
            {
                type: "verdadeiro_falso",
                difficulty: "Fácil",
                question: "No final da história, o irmão de Hana, George, consegue sobreviver ao Holocausto.",
                correctAnswer: true,
                explanation: "Verdadeiro. George é um dos poucos sobreviventes da família e dedica-se a manter viva a memória de Hana."
            },
            
            // 2 questões difíceis sobre A Mala de Hana
            {
                type: "aberta",
                difficulty: "Difícil",
                question: "Como a história de Hana se relaciona com a importância de preservar a memória histórica?",
                correctKeywords: ["lembrar", "passado", "aprender", "ensinar", "respeito", "tolerância", "não repetir", "história"],
                incorrectKeywords: ["esquecer", "ignorar", "superar"],
                explanation: "A história de Hana mostra a importância de lembrar o passado para aprender com ele, promover respeito e tolerância, e evitar que tragédias similares se repitam."
            },
            {
                type: "multipla",
                difficulty: "Difícil",
                question: "Qual é a mensagem central que 'A Mala de Hana' transmite sobre preconceito e discriminação?",
                options: [
                    "Que o preconceito é natural e inevitável",
                    "Que devemos combater o preconceito através da educação e memória",
                    "Que o preconceito só existe em certas culturas",
                    "Que o preconceito é coisa do passado"
                ],
                correctAnswer: 1,
                explanation: "O livro transmite a mensagem de que devemos combater o preconceito através da educação, memória histórica e respeito às diferenças."
            },
            
            // 15 questões fáceis de preposição
            {
                type: "multipla",
                difficulty: "Fácil",
                question: "Qual das palavras abaixo é uma preposição?",
                options: ["correr", "com", "feliz", "casa"],
                correctAnswer: 1,
                explanation: "'Com' é uma preposição que indica companhia ou instrumento."
            },
            {
                type: "multipla",
                difficulty: "Fácil",
                question: "Complete a frase: 'Vou ______ escola.'",
                options: ["na", "para a", "de", "com"],
                correctAnswer: 1,
                explanation: "A preposição 'para' indica direção/destino, contraindo-se com o artigo 'a' formando 'para a'."
            },
            {
                type: "verdadeiro_falso",
                difficulty: "Fácil",
                question: "A palavra 'durante' pode funcionar como preposição.",
                correctAnswer: true,
                explanation: "Verdadeiro. 'Durante' é uma preposição acidental que indica tempo."
            },
            {
                type: "marcar_x",
                difficulty: "Fácil",
                question: "Marque as preposições essenciais:",
                options: ["a", "de", "em", "para"],
                correctAnswers: [0, 1, 2, 3],
                explanation: "Todas as opções são preposições essenciais da língua portuguesa."
            },
            {
                type: "multipla",
                difficulty: "Fácil",
                question: "Qual preposição completa: 'Preciso ______ ajuda.'",
                options: ["de", "em", "por", "com"],
                correctAnswer: 0,
                explanation: "O verbo 'precisar' exige a preposição 'de'."
            },
            {
                type: "aberta",
                difficulty: "Fácil",
                question: "Qual preposição indica lugar em: 'O livro está ______ mesa.'?",
                correctKeywords: ["em cima da", "sobre a", "sobre", "em"],
                incorrectKeywords: [],
                explanation: "As preposições 'em', 'sobre' e 'em cima de' podem indicar lugar nesse contexto."
            },
            {
                type: "verdadeiro_falso",
                difficulty: "Fácil",
                question: "A preposição 'contra' indica oposição.",
                correctAnswer: true,
                explanation: "Verdadeiro. 'Contra' indica oposição, como em 'lutar contra'."
            },
            {
                type: "multipla",
                difficulty: "Fácil",
                question: "Qual preposição indica tempo em: 'Chegarei ______ duas horas.'?",
                options: ["em", "de", "por", "para"],
                correctAnswer: 0,
                explanation: "A preposição 'em' indica tempo determinado."
            },
            {
                type: "marcar_x",
                difficulty: "Fácil",
                question: "Marque as locuções prepositivas:",
                options: ["apesar de", "debaixo de", "correndo", "em vez de"],
                correctAnswers: [0, 1, 3],
                explanation: "'Apesar de', 'debaixo de' e 'em vez de' são locuções prepositivas (conjunto de palavras com valor de preposição)."
            },
            {
                type: "multipla",
                difficulty: "Fácil",
                question: "Qual preposição indica causa em: 'Faltou ______ doença.'?",
                options: ["por", "de", "em", "com"],
                correctAnswer: 0,
                explanation: "A preposição 'por' indica causa nesse contexto."
            },
            {
                type: "aberta",
                difficulty: "Fácil",
                question: "Qual o valor semântico da preposição em: 'Conversamos sobre o livro.'?",
                correctKeywords: ["assunto", "tema", "sobre"],
                incorrectKeywords: [],
                explanation: "A preposição 'sobre' indica assunto ou tema da conversa."
            },
            {
                type: "verdadeiro_falso",
                difficulty: "Fácil",
                question: "A preposição 'sem' é o antônimo de 'com'.",
                correctAnswer: true,
                explanation: "Verdadeiro. 'Sem' indica ausência, enquanto 'com' indica presença."
            },
            {
                type: "multipla",
                difficulty: "Fácil",
                question: "Qual preposição indica instrumento em: 'Escrevo ______ caneta.'?",
                options: ["com", "de", "em", "por"],
                correctAnswer: 0,
                explanation: "A preposição 'com' indica o instrumento utilizado."
            },
            {
                type: "marcar_x",
                difficulty: "Fácil",
                question: "Marque as frases com preposições:",
                options: ["Gosto de chocolate.", "Ela estuda muito.", "Vou para casa.", "Choveu ontem."],
                correctAnswers: [0, 2],
                explanation: "As frases com preposições são: 'Gosto de chocolate' (preposição 'de') e 'Vou para casa' (preposição 'para')."
            },
            {
                type: "multipla",
                difficulty: "Fácil",
                question: "Complete: 'Preciso falar ______ você.'",
                options: ["com", "de", "em", "por"],
                correctAnswer: 0,
                explanation: "O verbo 'falar' exige a preposição 'com' quando indica com quem se fala."
            },
            
            // 10 questões de valor semântico, concordância e expressões
            {
                type: "multipla",
                difficulty: "Média",
                question: "Qual a forma correta: 'A maioria dos alunos ______ presentes.'?",
                options: ["está", "estão", "estiveram", "estariam"],
                correctAnswer: 1,
                explanation: "Com 'a maioria de', o verbo pode concordar com 'maioria' (singular) ou com 'alunos' (plural). A concordância com o plural é mais comum."
            },
            {
                type: "aberta",
                difficulty: "Média",
                question: "Complete a concordância: 'Cerca de 20% da população ______ afetada.'",
                correctKeywords: ["foi", "está", "será", "ficou"],
                incorrectKeywords: ["foram", "estão", "serão", "ficaram"],
                explanation: "Com porcentagem, o verbo concorda com o substantivo que vem após 'de' ('população' - singular)."
            },
            {
                type: "verdadeiro_falso",
                difficulty: "Média",
                question: "Na frase 'Grande parte dos problemas foram resolvidos.', a concordância está correta.",
                correctAnswer: true,
                explanation: "Verdadeiro. Com 'grande parte de', o verbo pode concordar com 'parte' (singular) ou com 'problemas' (plural). Ambas as formas são aceitas."
            },
            {
                type: "multipla",
                difficulty: "Média",
                question: "Qual a forma correta: '1% dos entrevistados ______ satisfeitos.'?",
                options: ["está", "estão", "estaria", "estivera"],
                correctAnswer: 1,
                explanation: "Com porcentagem inferior a 2%, o verbo geralmente vai para o plural, concordando com o substantivo ('entrevistados')."
            },
            {
                type: "marcar_x",
                difficulty: "Média",
                question: "Marque as frases com concordância verbal correta:",
                options: [
                    "A maioria das pessoas gosta de música.",
                    "Cerca de 10% do orçamento foi cortado.",
                    "0,5% dos funcionários faltaram hoje.",
                    "Grande parte dos problemas tem solução."
                ],
                correctAnswers: [0, 1, 2, 3],
                explanation: "Todas as frases apresentam concordância verbal adequada para cada caso."
            },
            {
                type: "aberta",
                difficulty: "Média",
                question: "Qual o valor semântico da preposição em: 'Trabalhou por 10 horas seguidas.'?",
                correctKeywords: ["tempo", "duração", "período"],
                incorrectKeywords: [],
                explanation: "A preposição 'por' indica tempo de duração nessa frase."
            },
            {
                type: "multipla",
                difficulty: "Média",
                question: "Qual a forma correta: 'Nem 1% dos eleitores ______ votou.'?",
                options: ["havia", "haviam", "tinha", "tinham"],
                correctAnswer: 0,
                explanation: "Com 'nem 1%', o verbo deve ficar no singular, concordando com '1%'."
            },
            {
                type: "verdadeiro_falso",
                difficulty: "Média",
                question: "Na frase 'Cerca de 0,5% da amostra foi contaminada.', a concordância está correta.",
                correctAnswer: true,
                explanation: "Verdadeiro. Com porcentagem decimal, o verbo concorda com o substantivo após 'de' ('amostra' - singular)."
            },
            {
                type: "multipla",
                difficulty: "Média",
                question: "Qual a forma correta: 'A maior parte dos documentos ______ perdidos.'?",
                options: ["foi", "foram", "era", "eram"],
                correctAnswer: 1,
                explanation: "Com 'a maior parte de', o verbo pode concordar com 'parte' (singular) ou com 'documentos' (plural). Ambas são aceitas, mas a concordância com o plural é mais comum."
            },
            {
                type: "aberta",
                difficulty: "Média",
                question: "Complete a concordância: 'Cerca de 15% dos recursos ______ utilizados.'",
                correctKeywords: ["foram", "serão", "são"],
                incorrectKeywords: ["foi", "será", "é"],
                explanation: "Com porcentagem seguida de substantivo plural ('recursos'), o verbo vai para o plural."
            }
        ];

        // Embaralhar as questões
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        const shuffledQuestions = shuffleArray([...questions]);

        // Elementos do DOM
        const startScreen = document.getElementById('start-screen');
        const questionScreen = document.getElementById('question-screen');
        const resultsScreen = document.getElementById('results-screen');
        const questionType = document.getElementById('question-type');
        const questionDifficulty = document.getElementById('question-difficulty');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const submitBtn = document.getElementById('submit-btn');
        const nextBtn = document.getElementById('next-btn');
        const progress = document.getElementById('progress');
        const progressText = document.getElementById('progress-text');
        const questionCounter = document.getElementById('question-counter');
        const finalScore = document.getElementById('final-score');
        const scoreGrade = document.getElementById('score-grade');
        const resultsDetails = document.getElementById('results-details');
        const restartBtn = document.getElementById('restart-btn');
        const startBtn = document.getElementById('start-btn');

        // Variáveis do jogo
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];

        // Inicializar o jogo
        function initGame() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            startScreen.style.display = 'block';
            questionScreen.style.display = 'none';
            resultsScreen.style.display = 'none';
        }

        // Iniciar o quiz
        function startQuiz() {
            startScreen.style.display = 'none';
            questionScreen.style.display = 'block';
            loadQuestion();
        }

        // Carregar questão atual
        function loadQuestion() {
            const question = shuffledQuestions[currentQuestionIndex];
            
            // Atualizar cabeçalho
            questionType.textContent = getQuestionTypeText(question.type);
            questionDifficulty.textContent = `Dificuldade: ${question.difficulty}`;
            
            // Atualizar barra de progresso
            const progressPercentage = (currentQuestionIndex / shuffledQuestions.length) * 100;
            progress.style.width = `${progressPercentage}%`;
            progressText.textContent = `Progresso: ${Math.round(progressPercentage)}%`;
            questionCounter.textContent = `Questão ${currentQuestionIndex + 1} de ${shuffledQuestions.length}`;
            
            // Definir texto da pergunta
            questionText.textContent = question.question;
            
            // Limpar opções anteriores
            optionsContainer.innerHTML = '';
            
            // Configurar botões
            submitBtn.disabled = false;
            nextBtn.disabled = true;
            
            // Criar opções baseadas no tipo de questão
            switch(question.type) {
                case 'multipla':
                    createMultipleChoiceOptions(question.options);
                    break;
                case 'verdadeiro_falso':
                    createTrueFalseOptions();
                    break;
                case 'marcar_x':
                    createCheckboxOptions(question.options);
                    break;
                case 'aberta':
                    createOpenAnswerInput();
                    break;
            }
        }

        // Obter texto descritivo para o tipo de questão
        function getQuestionTypeText(type) {
            switch(type) {
                case 'multipla': return 'Múltipla Escolha';
                case 'verdadeiro_falso': return 'Verdadeiro ou Falso';
                case 'marcar_x': return 'Marcar X';
                case 'aberta': return 'Resposta Aberta';
                default: return '';
            }
        }

        // Criar opções de múltipla escolha
        function createMultipleChoiceOptions(options) {
            options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                    ${option}
                `;
                optionElement.dataset.index = index;
                optionElement.addEventListener('click', () => selectOption(optionElement));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Criar opções de verdadeiro ou falso
        function createTrueFalseOptions() {
            const trueFalseContainer = document.createElement('div');
            trueFalseContainer.className = 'true-false-options';
            
            const trueOption = document.createElement('div');
            trueOption.className = 'option true-option';
            trueOption.innerHTML = `
                <span class="option-letter">V</span>
                Verdadeiro
            `;
            trueOption.dataset.value = 'true';
            trueOption.addEventListener('click', () => selectOption(trueOption));
            
            const falseOption = document.createElement('div');
            falseOption.className = 'option false-option';
            falseOption.innerHTML = `
                <span class="option-letter">F</span>
                Falso
            `;
            falseOption.dataset.value = 'false';
            falseOption.addEventListener('click', () => selectOption(falseOption));
            
            trueFalseContainer.appendChild(trueOption);
            trueFalseContainer.appendChild(falseOption);
            optionsContainer.appendChild(trueFalseContainer);
        }

        // Criar opções de marcar X
        function createCheckboxOptions(options) {
            options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option checkbox-option';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `option-${index}`;
                checkbox.dataset.index = index;
                
                const label = document.createElement('label');
                label.htmlFor = `option-${index}`;
                label.textContent = option;
                
                optionElement.appendChild(checkbox);
                optionElement.appendChild(label);
                optionsContainer.appendChild(optionElement);
            });
        }

        // Criar input para resposta aberta
        function createOpenAnswerInput() {
            const inputContainer = document.createElement('div');
            inputContainer.className = 'open-answer';
            
            const textarea = document.createElement('textarea');
            textarea.placeholder = 'Digite sua resposta aqui...';
            textarea.id = 'open-answer-input';
            
            inputContainer.appendChild(textarea);
            optionsContainer.appendChild(inputContainer);
        }

        // Selecionar uma opção (para múltipla escolha e V/F)
        function selectOption(selectedElement) {
            // Remover seleção anterior
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Adicionar seleção atual
            selectedElement.classList.add('selected');
        }

        // Verificar resposta
        function checkAnswer() {
            const question = shuffledQuestions[currentQuestionIndex];
            let isCorrect = false;
            let userAnswer;
            
            switch(question.type) {
                case 'multipla':
                    const selectedOption = document.querySelector('.option.selected');
                    if (!selectedOption) {
                        alert('Por favor, selecione uma opção.');
                        return;
                    }
                    
                    userAnswer = parseInt(selectedOption.dataset.index);
                    isCorrect = userAnswer === question.correctAnswer;
                    break;
                    
                case 'verdadeiro_falso':
                    const selectedTF = document.querySelector('.option.selected');
                    if (!selectedTF) {
                        alert('Por favor, selecione Verdadeiro ou Falso.');
                        return;
                    }
                    
                    userAnswer = selectedTF.dataset.value === 'true';
                    isCorrect = userAnswer === question.correctAnswer;
                    break;
                    
                case 'marcar_x':
                    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
                    const selectedIndices = [];
                    
                    checkboxes.forEach((checkbox, index) => {
                        if (checkbox.checked) {
                            selectedIndices.push(index);
                        }
                    });
                    
                    userAnswer = selectedIndices;
                    
                    // Verificar se as respostas coincidem
                    if (selectedIndices.length === question.correctAnswers.length) {
                        isCorrect = question.correctAnswers.every(index => selectedIndices.includes(index)) &&
                                   selectedIndices.every(index => question.correctAnswers.includes(index));
                    }
                    break;
                    
                case 'aberta':
                    const textarea = document.getElementById('open-answer-input');
                    userAnswer = textarea.value.trim().toLowerCase();
                    
                    if (!userAnswer) {
                        alert('Por favor, digite uma resposta.');
                        return;
                    }
                    
                    // Verificar se a resposta contém palavras-chave necessárias
                    const hasRequiredKeywords = question.correctKeywords.some(keyword => 
                        userAnswer.includes(keyword.toLowerCase())
                    );
                    
                    // Verificar se a resposta não contém palavras invalidadoras
                    const hasInvalidatingKeywords = question.incorrectKeywords.some(keyword => 
                        userAnswer.includes(keyword.toLowerCase())
                    );
                    
                    isCorrect = hasRequiredKeywords && !hasInvalidatingKeywords;
                    break;
            }
            
            // Armazenar resposta do usuário
            userAnswers.push({
                question: question.question,
                userAnswer: userAnswer,
                correctAnswer: question.correctAnswer !== undefined ? question.correctAnswer : question.correctKeywords,
                isCorrect: isCorrect,
                explanation: question.explanation,
                type: question.type
            });
            
            if (isCorrect) {
                score++;
            }
            
            // Atualizar botões
            submitBtn.disabled = true;
            nextBtn.disabled = false;
        }

        // Avançar para a próxima questão
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < shuffledQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        // Mostrar resultados finais
        function showResults() {
            questionScreen.style.display = 'none';
            resultsScreen.style.display = 'block';
            
            // Calcular porcentagem
            const percentage = (score / shuffledQuestions.length) * 100;
            const scoreCircle = document.querySelector('.score-circle');
            scoreCircle.style.setProperty('--percentage', `${percentage}%`);
            
            // Atualizar textos
            finalScore.textContent = `${score}/${shuffledQuestions.length}`;
            const grade = (score / shuffledQuestions.length) * 10;
            scoreGrade.textContent = `Nota: ${grade.toFixed(1)}`;
            
            // Detalhes das respostas
            let detailsHTML = '';
            
            userAnswers.forEach((answer, index) => {
                let userAnswerText = '';
                let correctAnswerText = '';
                
                // Formatar a resposta do usuário e a correta
                if (shuffledQuestions[index].type === 'multipla') {
                    userAnswerText = shuffledQuestions[index].options[answer.userAnswer];
                    correctAnswerText = shuffledQuestions[index].options[shuffledQuestions[index].correctAnswer];
                } else if (shuffledQuestions[index].type === 'verdadeiro_falso') {
                    userAnswerText = answer.userAnswer ? 'Verdadeiro' : 'Falso';
                    correctAnswerText = shuffledQuestions[index].correctAnswer ? 'Verdadeiro' : 'Falso';
                } else if (shuffledQuestions[index].type === 'marcar_x') {
                    userAnswerText = answer.userAnswer.map(i => shuffledQuestions[index].options[i]).join(', ') || 'Nenhuma opção selecionada';
                    correctAnswerText = shuffledQuestions[index].correctAnswers.map(i => shuffledQuestions[index].options[i]).join(', ');
                } else {
                    userAnswerText = answer.userAnswer || 'Sem resposta';
                    correctAnswerText = shuffledQuestions[index].correctKeywords.join(' ou ');
                }
                
                detailsHTML += `
                    <div class="result-item">
                        <div class="result-icon ${answer.isCorrect ? 'correct-icon' : 'incorrect-icon'}">
                            ${answer.isCorrect ? '✓' : '✗'}
                        </div>
                        <div class="result-content">
                            <div class="result-question">${index + 1}. ${answer.question}</div>
                            <div class="result-answer">
                                <strong>Sua resposta:</strong> ${userAnswerText}<br>
                                <strong>Resposta correta:</strong> ${correctAnswerText}<br>
                                <strong>Explicação:</strong> ${answer.explanation}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            resultsDetails.innerHTML = detailsHTML;
        }

        // Reiniciar o jogo
        function restartGame() {
            // Reembaralhar as questões
            const newShuffledQuestions = shuffleArray([...questions]);
            shuffledQuestions.length = 0;
            shuffledQuestions.push(...newShuffledQuestions);
            
            initGame();
        }

        // Event Listeners
        submitBtn.addEventListener('click', checkAnswer);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', restartGame);
        startBtn.addEventListener('click', startQuiz);

        // Inicializar o jogo
        initGame();
    </script>
</body>
</html>